<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beranda - CNN Indonesia</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Custom Fonts (simulating CNN's look) */
        @font-face {
            font-family: 'CNN Sans Display';
            src: url('fonts/cnn_sans_display-v1.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'CNN Sans Display';
            src: url('fonts/cnn_sans_display-medium-v1.woff2') format('woff2');
            font-weight: 500;
            font-style: normal;
        }
        @font-face {
            font-family: 'CNN Sans Display';
            src: url('fonts/cnn_sans_display-bold-v1.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
        }
        @font-face {
            font-family: 'Noto Serif';
            src: url('fonts/noto_serif-bold-v1.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
        }
        @font-face {
            font-family: 'Noto Serif';
            src: url('fonts/noto_serif-bold_italic-v1.woff2') format('woff2');
            font-weight: 700;
            font-style: italic;
        }
        @font-face {
            font-family: 'Noto Serif Extra Condensed Black';
            src: url('fonts/noto_serif_extra_condensed_black-v1.woff2') format('woff2');
            font-weight: 900; /* Assuming black is 900 */
            font-style: normal;
        }
        @font-face {
            font-family: 'Noto Sans Arabic';
            src: url('fonts/noto_sans_arabic-v1.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Noto Sans Arabic';
            src: url('fonts/noto_sans_arabic-v1.ttf') format('truetype'); /* Fallback for TTF */
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Noto Serif Semi Condensed';
            src: url('fonts/noto_serif_semi_condensed-v1.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Helvetica Neue';
            src: url('fonts/helveticaneue-v1.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }

        /* Apply fonts to specific elements */
        body {
            font-family: 'CNN Sans Display', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            user-select: none; /* Add this to prevent text selection */
            background-color: #f7f7f7; /* Background color for the page */
            color: #333;
            line-height: 1.6;
            box-sizing: border-box;
        }

        h1, h2, h3 {
            font-family: 'Noto Serif Extra Condensed Black', serif; /* Or a bold CNN Sans if preferred */
        }

        /* Ensure main content is centered and has padding consistent with the article page */
        main {
            max-width: 960px; /* Reduced for better general article list look */
            margin: 0 auto;
            padding: 15px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        /* Existing custom styles from previous script */
        #loadingOverlay {
            position: absolute; /* Changed to absolute to fit within main content */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #007bff;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Styles for homepage content */
        .homepage-headline {
            font-family: 'Noto Serif Extra Condensed Black', serif;
            font-size: 2.2em;
            line-height: 1.2;
            margin-top: 20px;
            margin-bottom: 30px;
            color: #222;
            font-weight: 700;
            text-align: center;
        }

        .article-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding-bottom: 20px;
        }

        .article-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .article-card-content {
            padding: 15px;
            flex-grow: 1; /* Memastikan konten mengisi sisa ruang */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .article-card-content h3 {
            font-family: 'Noto Serif', serif; /* Use Noto Serif for headlines */
            font-size: 1.2em;
            color: #222;
            margin-top: 0;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .article-card-content p {
            font-family: 'CNN Sans Display', sans-serif; /* Use CNN Sans Display for body text */
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
            flex-grow: 1; /* Memastikan paragraf mengisi ruang */
        }

        .article-card-content .category {
            font-size: 0.75em;
            padding: 3px 6px;
            margin-bottom: 10px;
            align-self: flex-start; /* Agar kategori tidak memenuhi lebar */
            /* MODIFIED: Changed highlight color and removed border-radius */
            background-color: rgba(204, 0, 0, 0.7); /* More faded CNN Red (70% opacity) */
            color: white;
            border-radius: 0; /* Removed rounded corners */
            font-weight: bold;
        }

        .article-card-content .read-more {
            display: inline-block;
            background-color: #007bff;
            color: #fff;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.85em;
            transition: background-color 0.2s ease-in-out;
            align-self: flex-start; /* Agar tombol tidak memenuhi lebar */
        }

        .article-card-content .read-more:hover {
            background-color: #0056b3;
        }

        /* Search Modal / Overlay Styles (Adjusted for Tailwind-like appearance) */
        /* Removed .search-modal-overlay, .search-modal-content, .search-modal-close styles */

        .search-categories {
            margin-top: 20px;
            text-align: left;
        }

        .search-categories h3 {
            font-family: 'CNN Sans Display', sans-serif;
            font-size: 1.2em;
            font-weight: bold;
            color: #222;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee; /* Subtle separator */
            padding-bottom: 5px;
        }

        .category-grid {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Responsive grid for categories */
            gap: 10px;
            text-align: left;
        }

        .category-grid li {
            margin-bottom: 0;
            display: block;
        }

        .category-grid a {
            font-family: 'CNN Sans Display', sans-serif;
            color: #333;
            text-decoration: none;
            display: block;
            padding: 5px 0;
            transition: color 0.2s ease-in-out;
        }

        .category-grid a:hover {
            text-decoration: underline;
            color: #CC0000; /* CNN Red on hover */
        }

        /* MODIFIED: Removed highlight for main category links */
        .main-category-link {
            font-size: 1.1em;
            font-weight: normal; /* Changed from bold to normal */
            margin-top: 10px;
            margin-bottom: 5px;
            color: #333; /* Changed from red to a standard dark gray */
        }

        .sub-category-list {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }

        .sub-category-list li {
            margin-bottom: 3px;
        }

        .sub-category-list a {
            font-size: 0.9em;
            font-weight: normal;
            padding: 2px 0;
            color: #555; /* Sub-categories in a slightly lighter shade */
        }

        .search-query-display {
            font-family: 'CNN Sans Display', sans-serif;
            font-size: 1.1em;
            font-weight: 500; /* Medium weight */
            color: #555;
            margin-bottom: 20px;
            text-align: left;
            padding-left: 0; /* Remove padding-left to align with main content */
        }


        /* Responsive Adjustments (keeping original as base, but adjusted for new fonts) */
        @media (max-width: 768px) {
            main {
                padding: 10px;
            }

            .homepage-headline {
                font-size: 1.8em;
            }

            .article-list {
                grid-template-columns: 1fr; /* Satu kolom di layar kecil */
            }

            .article-card-content h3 {
                font-size: 1.1em;
            }

            .category-grid {
                grid-template-columns: repeat(2, 1fr); /* 2 kolom di layar tablet */
            }
        }

        @media (max-width: 480px) {
            .homepage-headline {
                font-size: 1.6em;
            }

            .category-grid {
                grid-template-columns: 1fr; /* 1 kolom di layar ponsel */
            }
            /* Removed search modal specific responsive styles */
        }

        /* CNN-specific elements from article page */
        .cnn-red-bar {
            width: 6px;
            background-color: #CC0000;
            flex-shrink: 0;
            margin-right: 16px;
        }

        /* Floating Console Styles */
        #floatingConsole {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            color: limegreen;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.8em;
            z-index: 9999;
            width: 250px;
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid #333;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body class="bg-white text-gray-900">
    <!-- Header -->
    <header id="mainHeader" class="flex items-center justify-between py-0 bg-white sticky top-0 z-10 px-4 sm:px-6 lg:px-8">
        <div class="flex items-center space-x-4 max-w-4xl mx-auto w-full">
            <button class="text-gray-600 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/CNN.svg/960px-CNN.svg.png" alt="Logo CNN" class="h-5">
            <span class="font-semibold text-lg">World</span>
            <!-- Removed Search Icon from header -->
        </div>
    </header>

    <!-- Garis di bawah header -->
    <div class="max-w-4xl mx-auto border-b border-gray-200"></div>

    <main style="position: relative;">
        <!-- Loading Overlay for dynamic content -->
        <div id="loadingOverlay">
            <div class="spinner"></div>
        </div>

        <!-- Default Homepage Content -->
        <div id="defaultHomepageContent">
            <h1 class="homepage-headline">Berita Utama: Terkini dari Seluruh Dunia</h1>
            <section class="article-list" id="defaultArticleListContainer">
                <!-- Initial articles loaded here -->
            </section>
        </div>

        <!-- Search Results Content -->
        <div id="searchResultsContent" style="display: none;">
            <p id="searchQueryDisplay" class="search-query-display"></p>
            <section class="article-list" id="searchArticleListContainer">
                <!-- Search results loaded here -->
            </section>
        </div>
    </main>

    <!-- New section above footer (from article page) -->
    <section class="bg-black text-white py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
            <div class="relative mb-8">
                <input type="text" placeholder="Search CNN..." class="w-full bg-gray-800 text-white border border-gray-700 rounded-md py-3 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500" id="secondarySearchInput">
                <button class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white" id="secondarySearchButton">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </button>
            </div>

            <div class="border-b border-gray-700 mb-8 pb-8">
                <a href="#" class="block text-center text-white text-lg font-semibold hover:underline">Sign in</a>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-left">
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Live TV</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Listen</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Watch</a></li>
                </ul>
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">World</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">US Politics</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Business</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Markets</a></li>
                </ul>
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Health</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Entertainment</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Tech</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Style</a></li>
                    <li class="mb-2"><a href="#" class="text-white hover:text-gray-400">Travel</a></li>
                </ul>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-gray-300 py-8 text-center">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-center mb-6">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/CNN.svg/960px-CNN.svg.png" alt="CNN Logo" class="h-6 mr-2 filter grayscale">
                <span class="font-bold text-xl text-white">World</span>
            </div>

            <p class="text-sm font-semibold mb-6">FOLLOW CNN</p>

            <div class="flex justify-center space-x-6 mb-8">
                <a href="#" class="text-gray-400 hover:text-white text-2xl"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-gray-400 hover:text-white text-2xl"><i class="fab fa-twitter"></i></a> <!-- Using Twitter for X icon -->
                <a href="#" class="text-gray-400 hover:text-white text-2xl"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-gray-400 hover:text-white text-2xl"><i class="fab fa-tiktok"></i></a>
                <a href="#" class="text-gray-400 hover:text-white text-2xl"><i class="fab fa-linkedin-in"></i></a>
            </div>

            <div class="border-t border-gray-700 pt-8 mb-8">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 text-sm">
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Terms of Use</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Privacy Policy</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Cookie Settings</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Ad Choices</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Accessibility & CC</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">About</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Newsletters</a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">Transcripts</a>
                </div>
            </div>

            <p class="text-xs text-gray-500 leading-relaxed">
                &copy; 2025 Cable News Network. A Warner Bros. Discovery Company. All Rights Reserved.<br>
                CNN Sans &trade; &copy; 2016 Cable News Network.
            </p>
        </div>
    </footer>

    <!-- Floating Console for Debugging -->
    <div id="floatingConsole" style="display: none;">
        <strong>Debug Console:</strong><br>
        Actual Input: <span id="debugActualInput"></span><br>
        Display Input: <span id="debugDisplayInput"></span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const defaultHomepageContent = document.getElementById('defaultHomepageContent');
            const defaultArticleListContainer = document.getElementById('defaultArticleListContainer');
            const searchResultsContent = document.getElementById('searchResultsContent');
            const searchArticleListContainer = document.getElementById('searchArticleListContainer');
            const searchQueryDisplay = document.getElementById('searchQueryDisplay');

            const loadingOverlay = document.getElementById('loadingOverlay');
            const secondarySearchInput = document.getElementById('secondarySearchInput');
            const secondarySearchButton = document.getElementById('secondarySearchButton');

            // Debug console elements
            const floatingConsole = document.getElementById('floatingConsole');
            const debugActualInput = document.getElementById('debugActualInput');
            const debugDisplayInput = document.getElementById('debugDisplayInput');

            // Show console for debugging
            floatingConsole.style.display = 'block';

            const SMITH_FAMILY_ARTICLE_BASE_URL = `https://deyiksanjaya.github.io/atma/smith-family`;

            const mockNewsArticles = [
                {
                    title: "Penyelidikan Baru Ungkap Petunjuk Kasus Lama",
                    description: "Tim investigasi membuka kembali kasus dingin yang telah lama terhenti, menemukan bukti baru yang mengejutkan.",
                    category: "HUKUM",
                    url: "https://example.com/hukum-1"
                },
                {
                    title: "Fenomena Sosial di Balik Kriminalitas Remaja",
                    description: "Analisis mendalam tentang faktor-faktor sosial yang berkontribusi pada peningkatan angka kriminalitas di kalangan remaja perkotaan.",
                    category: "SOSIAL",
                    url: "https://example.com/sosial-1"
                },
                {
                    title: "Teknologi Forensik Terbaru Mengubah Lanskap Investigasi",
                    description: "Bagaimana inovasi dalam ilmu forensik membantu memecahkan kasus-kasus yang sebelumnya dianggap mustahil.",
                    category: "TEKNOLOGI",
                    url: "https://example.com/teknologi-1"
                },
                {
                    title: "Dampak Psikologis Kejahatan Terhadap Korban dan Keluarga",
                    description: "Studi kasus tentang trauma jangka panjang yang dialami oleh korban kejahatan dan upaya pemulihan yang dilakukan.",
                    category: "PSIKOLOGI",
                    url: "https://example.com/psikologi-1"
                },
                {
                    title: "Sejarah Kasus-Kasus Kriminal Paling Kontroversial",
                    description: "Melihat kembali beberapa kasus kriminal yang paling banyak diperdebatkan dan dampaknya pada sistem hukum.",
                    category: "SEJARAH",
                    url: "https://example.com/sejarah-1"
                },
                {
                    title: "Inovasi Terbaru dalam Energi Terbarukan",
                    description: "Penemuan baru yang menjanjikan masa depan energi bersih dan berkelanjutan.",
                    category: "SAINS",
                    url: "https://example.com/sains-1"
                },
                {
                    title: "Tren Pasar Saham Global di Tengah Ketidakpastian Ekonomi",
                    description: "Analisis pergerakan pasar saham dunia dan dampaknya pada investasi.",
                    category: "BISNIS",
                    url: "https://example.com/bisnis-1"
                },
                {
                    title: "Piala Dunia Sepak Bola: Prediksi dan Sorotan",
                    description: "Persiapan tim-tim besar dan prediksi siapa yang akan menjadi juara.",
                    category: "OLAHRAGA",
                    url: "https://example.com/olahraga-1"
                },
                {
                    title: "Review Film Terbaru: Drama yang Menggugah Hati",
                    description: "Ulasan lengkap film yang sedang tayang, wajib tonton minggu ini.",
                    category: "HIBURAN",
                    url: "https://example.com/hiburan-1"
                },
                {
                    title: "Pencarian Keluarga Hilang di Pegunungan",
                    description: "Tim SAR terus mencari anggota keluarga yang hilang saat mendaki gunung di tengah cuaca ekstrem.",
                    category: "BENCANA",
                    url: "https://example.com/keluarga-hilang"
                },
                {
                    title: "Kasus Kriminal: Pelaku Berhasil Keluar dari Penjara",
                    description: "Seorang narapidana kasus besar berhasil keluar dari penjara dengan keamanan maksimum, memicu perburuan nasional.",
                    category: "KRIMINAL",
                    url: "https://example.com/pelaku-keluar"
                },
                {
                    title: "Dampak Konflik Terhadap Keluarga Korban",
                    description: "Kisah-kisah pilu keluarga yang terdampak konflik bersenjata, berjuang untuk kembali normal.",
                    category: "SOSIAL",
                    url: "https://example.com/keluarga-konflik"
                }
            ];

            const categoriesData = [
                { name: 'Umum', api_param: 'general', type: 'category',
                    subcategories: [
                        { name: 'Berita Terkini', api_param: 'latest news', type: 'query' },
                        { name: 'Nasional', api_param: 'national news', type: 'query' },
                        { name: 'Internasional', api_param: 'international news', type: 'query' }
                    ]
                },
                { name: 'Bisnis', api_param: 'business', type: 'category',
                    subcategories: [
                        { name: 'Ekonomi Global', api_param: 'global economy', type: 'query' },
                        { name: 'Pasar Saham', api_param: 'stock market', type: 'query' },
                        { name: 'Keuangan Pribadi', api_param: 'personal finance', type: 'query' }
                    ]
                },
                { name: 'Hiburan', api_param: 'entertainment', type: 'category',
                    subcategories: [
                        { name: 'Film & TV', api_param: 'movies OR television', type: 'query' },
                        { name: 'Musik', api_param: 'music', type: 'query' },
                        { name: 'Selebriti', api_param: 'celebrity', type: 'query' }
                    ]
                },
                { name: 'Kesehatan', api_param: 'health', type: 'category',
                    subcategories: [
                        { name: 'Gaya Hidup Sehat', api_param: 'healthy lifestyle', type: 'query' },
                        { name: 'Penelitian Medis', api_param: 'medical research', type: 'query' },
                        { name: 'Nutrisi', api_param: 'nutrition', type: 'query' }
                    ]
                },
                { name: 'Sains', api_param: 'science', type: 'category',
                    subcategories: [
                        { name: 'Antariksa', api_param: 'space', type: 'query' },
                        { name: 'Lingkungan', api_param: 'environment', type: 'query' },
                        { name: 'Penemuan Baru', api_param: 'new discoveries', type: 'query' }
                    ]
                },
                { name: 'Olahraga', api_param: 'sports', type: 'category',
                    subcategories: [
                        { name: 'Sepak Bola', api_param: 'football', type: 'query' },
                        { name: 'Basket', api_param: 'basketball', type: 'query' },
                        { name: 'Olimpiade', api_param: 'olympics', type: 'query' }
                    ]
                },
                { name: 'Teknologi', api_param: 'technology', type: 'category',
                    subcategories: [
                        { name: 'Gadget', api_param: 'gadgets', type: 'query' },
                        { name: 'Kecerdasan Buatan', api_param: 'artificial intelligence', type: 'query' },
                        { name: 'Startup', api_param: 'startup', type: 'query' }
                    ]
                },
                { name: 'Politik', api_param: 'politics', type: 'query',
                    subcategories: [
                        { name: 'Kebijakan Publik', api_param: 'public policy', type: 'query' },
                        { name: 'Pemilu', api_param: 'election', type: 'query' }
                    ]
                },
                { name: 'Gaya Hidup', api_param: 'lifestyle', type: 'query',
                    subcategories: [
                        { name: 'Fashion', api_param: 'fashion', type: 'query' },
                        { name: 'Kuliner', api_param: 'culinary', type: 'query' }
                    ]
                },
                { name: 'Travel', api_param: 'travel', type: 'query',
                    subcategories: [
                        { name: 'Destinasi Populer', api_param: 'popular destinations', type: 'query' },
                        { name: 'Tips Perjalanan', api_param: 'travel tips', type: 'query' }
                    ]
                }
            ];

            async function fetchAndDisplayArticles(searchParams = {}, prependSmithArticleData = null) {
                loadingOverlay.style.opacity = '1';
                loadingOverlay.style.visibility = 'visible';
                
                let targetContainer = defaultArticleListContainer;
                if (searchParams.isSearch) {
                    defaultHomepageContent.style.display = 'none';
                    searchResultsContent.style.display = 'block';
                    targetContainer = searchArticleListContainer;
                    // Set the search query display text
                    searchQueryDisplay.textContent = `Hasil Pencarian : "${searchParams.displayQuery || ''}"`; 
                } else {
                    defaultHomepageContent.style.display = 'block';
                    searchResultsContent.style.display = 'none';
                    targetContainer = defaultArticleListContainer;
                }

                targetContainer.innerHTML = '';

                let articlesToDisplay = [];

                if (prependSmithArticleData) {
                    const smithArticle = {
                        title: prependSmithArticleData.title,
                        description: prependSmithArticleData.description,
                        category: "KRIMINAL",
                        url: prependSmithArticleData.url,
                        urlToImage: '',
                        source: { name: 'CNN Indonesia' }
                    };
                    articlesToDisplay.push(smithArticle);
                }

                await new Promise(resolve => setTimeout(resolve, 500));

                loadingOverlay.style.opacity = '0';
                loadingOverlay.style.visibility = 'hidden';

                function createArticleCard(article) {
                    const card = document.createElement('div');
                    card.classList.add('article-card');

                    const articleCategory = article.category ? article.category.toUpperCase() : 'BERITA UMUM';

                    card.innerHTML = `
                        <div class="article-card-content">
                            <span class="category">${articleCategory}</span>
                            <h3>${article.title || 'Judul Tidak Tersedia'}</h3>
                            <p>${article.description || 'Deskripsi tidak tersedia.'}</p>
                            <a href="${article.url || '#'}" class="read-more" target="_blank">Baca Selengkapnya</a>
                        </div>
                    `;
                    return card;
                }

                let filteredArticles = [];
                if (searchParams.type === 'query') {
                    const queryLower = searchParams.param.toLowerCase();
                    filteredArticles = mockNewsArticles.filter(article =>
                        (article.title && article.title.toLowerCase().includes(queryLower)) ||
                        (article.description && article.description.toLowerCase().includes(queryLower)) ||
                        (article.category && article.category.toLowerCase().includes(queryLower))
                    );
                } else if (searchParams.type === 'category') {
                    const categoryLower = searchParams.param.toLowerCase();
                    filteredArticles = mockNewsArticles.filter(article =>
                        (article.category && article.category.toLowerCase() === categoryLower)
                    );
                } else {
                    filteredArticles = [...mockNewsArticles];
                }

                filteredArticles.forEach(article => {
                    articlesToDisplay.push(article);
                });

                if (articlesToDisplay.length > 0) {
                    articlesToDisplay.forEach(article => {
                        targetContainer.appendChild(createArticleCard(article));
                    });
                } else {
                    const noArticlesMessage = document.createElement('p');
                    noArticlesMessage.textContent = 'Tidak ada artikel yang tersedia untuk kategori/pencarian ini.';
                    noArticlesMessage.style.textAlign = 'center';
                    noArticlesMessage.style.marginTop = '20px';
                    targetContainer.appendChild(noArticlesMessage);
                }
            }

            function translateInputForSecretId(input) {
                let translated = '';
                const maxLength = 6; 
                let processedLength = 0;

                for (let i = 0; i < input.length && processedLength < maxLength; i++) {
                    const char = input[i].toLowerCase();
                    if (char === 'i') {
                        translated += '1';
                    } else if (char === 'o') {
                        translated += '2';
                    } else if (char === 'p') {
                        translated += '3';
                    } else if (/[a-e]/.test(char)) {
                        translated += char;
                    } else {
                        continue; 
                    }
                    processedLength++;
                }
                
                while (translated.length < maxLength) {
                    translated += '0'; 
                }
                return translated.substring(0, maxLength);
            }

            fetchAndDisplayArticles();

            const prewrittenText = "keluarga smith";
            let actualUserInput = '';

            // Function to update the floating console
            function updateFloatingConsole() {
                debugActualInput.textContent = actualUserInput;
                debugDisplayInput.textContent = secondarySearchInput.value;
            }

            secondarySearchInput.addEventListener('keydown', (event) => {
                // Only process printable characters and backspace/delete
                // Ignore navigation keys, function keys, etc.
                if (event.key.length === 1 && !event.ctrlKey && !event.metaKey) {
                    actualUserInput += event.key;
                    event.preventDefault(); // Prevent default browser input
                } else if (event.key === 'Backspace' || event.key === 'Delete') {
                    actualUserInput = actualUserInput.slice(0, -1);
                    event.preventDefault(); // Prevent default browser input
                }
                
                // Always update the displayed value based on actualUserInput's length
                secondarySearchInput.value = prewrittenText.substring(0, actualUserInput.length);
                updateFloatingConsole(); // Update console on keydown
            });

            secondarySearchInput.addEventListener('input', () => {
                const currentInputValue = secondarySearchInput.value;
                const expectedPeterAnswerText = prewrittenText.substring(0, actualUserInput.length);

                // If the current input value doesn't match the expected Peter Answer text,
                // it means the mobile keyboard has interfered (e.g., auto-correction, swipe typing).
                if (currentInputValue !== expectedPeterAnswerText) {
                    // Reconstruct actualUserInput based on what *could* have been typed from prewrittenText
                    let newActualUserInputLength = 0;
                    for (let i = 0; i < currentInputValue.length && i < prewrittenText.length; i++) {
                        if (currentInputValue[i] === prewrittenText[i]) {
                            newActualUserInputLength++;
                        } else {
                            // If a character doesn't match the prewritten text, stop.
                            // This handles cases where auto-correct inserts a wrong character or word.
                            break;
                        }
                    }
                    actualUserInput = prewrittenText.substring(0, newActualUserInputLength);
                }

                // Always force the displayed value to match the Peter Answer logic
                secondarySearchInput.value = prewrittenText.substring(0, actualUserInput.length);

                // Attempt to maintain cursor position at the end of the displayed text
                const cursorPosition = secondarySearchInput.value.length;
                secondarySearchInput.setSelectionRange(cursorPosition, cursorPosition);

                updateFloatingConsole(); // Update console on input
            });

            secondarySearchButton.addEventListener('click', (event) => {
                event.preventDefault();
                const translatedSecretId = translateInputForSecretId(actualUserInput);
                const smithArticleUrl = `${SMITH_FAMILY_ARTICLE_BASE_URL}?articleId=${translatedSecretId}`;

                const smithArticleData = {
                    title: "Tragedi Keluarga Smith: Anak Dibunuh, Jasadnya Menghilang",
                    description: "Sebuah kasus yang menggemparkan masyarakat, di mana seorang anak perempuan ditemukan tewas namun jasadnya raib secara misterius.",
                    url: smithArticleUrl
                };

                fetchAndDisplayArticles({ param: 'keluarga smith', type: 'query', isSearch: true, displayQuery: secondarySearchInput.value }, smithArticleData);
                
                secondarySearchInput.value = '';
                actualUserInput = '';
                updateFloatingConsole(); // Clear console after search
            });

            // Initial update of the console
            updateFloatingConsole();
        });
    </script>
</body>
</html>
